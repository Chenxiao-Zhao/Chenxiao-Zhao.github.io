---
layout:     post
title:      计算机系统架构梳理（十）内存
subtitle:   
date:       2020-03-16
author:     A Chang
header-img: img/post-bg-rwd.jpg
catalog: true
tags:
    - 技术-Tech
---

## 计算机系统架构梳理（十）内存 

### 内存在计算机架构中的位置
内存是计算机中重要的部件之一，它是外存与CPU进行沟通的桥梁。计算机中所有程序的运行都是在内存中进行的，因此内存的性能对计算机的影响非常大。  
内存(Memory)也被称为内存储器和主存储器，其作用是用于暂时存放CPU中的运算数据，以及与硬盘等外部存储器交换的数据。只要计算机在运行中，操作系统就会把需要运算的数据从内存调到CPU中进行运算，当运算完成后CPU再将结果传送出来，内存的运行决定计算机的稳定运行。

### 内存与RAM、ROM的关系
内存一般采用半导体存储单元，包括随机存储器（RAM），只读存储器（ROM），以及高速缓存（CACHE）。只不过因为RAM是其中最重要的存储器。

#### 只读存储器（ROM）
ROM表示只读存储器（Read Only Memory），在制造ROM的时候，信息（数据或程序）就被存入并永久保存。这些信息只能读出，一般不能写入，即使机器停电，这些数据也不会丢失。ROM一般用于存放计算机的基本程序和数据，如BIOS ROM。其物理外形一般是双列直插式（DIP）的集成块。  
现在比较流行的只读存储器是闪存(Flash Memory)，它属于EEPROM(电擦除可编程只读存储器)的升级，可以通过电学原理反复擦写。现在大部分BIOS程序就存储在FlashROM芯片中。U盘和固态硬盘(SSD)也是利用闪存原理做成的。

#### 随机存储器（RAM）
随机存储器（Random Access Memory）表示既可以从中读取数据，也可以写入数据。当机器电源关闭时，存于其中的数据就会丢失。我们通常购买或升级的内存条就是用作电脑的内存，内存条（SIMM）就是将RAM集成块集中在一起的一小块电路板，它插在计算机中的内存插槽上，以减少RAM集成块占用的空间。  
RAM分为两种：DRAM和SRAM。

##### DRAM
动态随机存储器(Dynamic RAM)的存储单元是由电容和相关元件做成的，电容内存储电荷的多寡代表信号0和1。  
电容存在漏电现象，电荷不足会导致存储单元数据出错，所以DRAM需要周期性刷新，以保持电荷状态。DRAM结构较简单且集成度高，通常用于制造内存条中的存储芯片。

##### SRAM
静态随机存储器(Static RAM)的存储单元是由晶体管和相关元件做成的锁存器，每个存储单元具有锁存“0”和“1”信号的功能。  
它速度快且不需要刷新操作，但集成度差和功耗较大，通常用于制造容量小但效率高的CPU缓存。 

### 内存的技术指标
一般包括奇偶校验、存取时间、延迟、引脚数、容量。

#### 奇偶校验
奇/偶校验（ECC）是数据传送时采用的一种校正数据错误的一种方式，分为奇校验和偶校验两种。  
如果是采用奇校验，在传送每一个字节的时候另外附加一位作为校验位，当原来数据序列中“1”的个数为奇数时，这个校验位就是“0”，否则这个校验位就是“1”，这样就可以保证传送数据满足奇校验的要求。在接收方收到数据时，将按照奇校验的要求检测数据中“1”的个数，如果是奇数，表示传送正确，否则表示传送错误。  
同理偶校验的过程和奇校验的过程一样，只是检测数据中“1”的个数为偶数。 

#### 存取时间
存取时间是内存的另一个重要指标，其单位为纳秒(ns)，常见的SDRAM有6ns，7ns，8ns，10ns等几种，相应在内存条上标为-6，-7，-8，-10等字样。这个数值越小，存取速度越快，但价格也越高。在选配内存时，应尽量挑选与CPU的时钟周期相匹配的内存条，这将有利于最大限度地发挥内存条的效率。   
内存慢而主板快，会影响CPU的速度，还有可能导致系统崩溃；内存快而主板慢，结果只能是大材小用造成资源浪费。

#### 频率
内存主频和CPU主频一样，习惯上被用来表示内存的速度，它代表着该内存所能达到的最高工作频率。内存主频是以MHz（兆赫）为单位来计量的。内存主频越高在一定程度上代表着内存所能达到的速度越快。  
晶体振荡器控制着时钟速度，在石英晶片上加上电压，其就以正弦波的形式震动起来，这一震动可以通过晶片的形变和大小记录下来。晶体的震动以正弦调和变化的电流的形式表现出来，这一变化的电流就是时钟信号。而内存本身并不具备晶体振荡器，因此内存工作时的时钟信号是由主板芯片组的北桥或直接由主板的时钟发生器提供的，也就是说内存无法决定自身的工作频率，其实际工作频率是由主板来决定的。