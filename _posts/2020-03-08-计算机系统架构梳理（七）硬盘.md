---
layout:     post
title:      计算机系统架构梳理（七）硬盘
subtitle:   
date:       2020-03-08
author:     A Chang
header-img: img/post-bg-rwd.jpg
catalog: true
tags:
    - 技术-Tech
---

## 计算机系统架构梳理（七）硬盘

### 机械硬盘

电脑硬盘是计算机最主要的存储设备。硬盘由一个或者多个铝制或者玻璃制的碟片组成。这些碟片外覆盖有铁磁性材料。  
硬盘的容量以兆字节（MB）或千兆字节（GB）为单位，1GB=1024MB，1TB=1024GB。但硬盘厂商在标称硬盘容量时通常取1G=1000MB，因此在BIOS中或在格式化硬盘时看到的容量会比厂家的标称值要小。

#### 转速
转速(Rotationl Speed 或Spindle speed)，是硬盘内电机主轴的旋转速度，也就是硬盘盘片在一分钟内所能完成的最大转数。转速的快慢是标示硬盘档次的重要参数之一，它是决定硬盘内部传输率的关键因素之一，在很大程度上直接影响到硬盘的速度。  
硬盘的转速越快，硬盘寻找文件的速度也就越快，相对的硬盘的传输速度也就得到了提高。硬盘转速以每分钟多少转来表示，单位表示为RPM，RPM是Revolutions Per minute的缩写，是转/每分钟。RPM值越大，内部传输率就越快，访问时间就越短，硬盘的整体性能也就越好。  
较高的转速可缩短硬盘的平均寻道时间和实际读写时间，但随着硬盘转速的不断提高也带来了温度升高、电机主轴磨损加大、工作噪音增大等负面影响。

#### 访问时间

平均访问时间(Average Access Time)是指磁头从起始位置到达目标磁道位置，并且从目标磁道上找到要读写的数据扇区所需的时间。  
平均访问时间体现了硬盘的读写速度，它包括了硬盘的寻道时间和等待时间，即：平均访问时间=平均寻道时间+平均等待时间。  
硬盘的平均寻道时间(Average Seek Time)是指硬盘的磁头移动到盘面指定磁道所需的时间。这个时间当然越小越好，硬盘的平均寻道时间通常在8ms到12ms之间，而SCSI硬盘则应小于或等于8ms。  
硬盘的等待时间，又叫潜伏期(Latency)，是指磁头已处于要访问的磁道，等待所要访问的扇区旋转至磁头下方的时间。平均等待时间为盘片旋转一周所需的时间的一半，一般应在4ms以下。

#### 传输速率
传输速率(Data Transfer Rate) 硬盘的数据传输率是指硬盘读写数据的速度，单位为兆字节每秒（MB/s）。硬盘数据传输率又包括了内部数据传输率和外部数据传输率。  
- 内部传输率(Internal Transfer Rate) 也称为持续传输率(Sustained Transfer Rate)，它反映了硬盘缓冲区未用时的性能。内部传输率主要依赖于硬盘的旋转速度。  
- 外部传输率（External Transfer Rate）也称为突发数据传输率（Burst Data Transfer Rate）或接口传输率，它标称的是系统总线与硬盘缓冲区之间的数据传输率，外部数据传输率与硬盘接口类型和硬盘缓存的大小有关。

#### 缓存

缓存（Cache memory）是硬盘控制器上的一块内存芯片，具有极快的存取速度，它是硬盘内部存储和外界接口之间的缓冲器。由于硬盘的内部数据传输速度和外界介面传输速度不同，缓存在其中起到一个缓冲的作用。缓存的大小与速度是直接关系到硬盘的传输速度的重要因素，能够大幅度地提高硬盘整体性能。当硬盘存取零碎数据时需要不断地在硬盘与内存之间交换数据，有大缓存，则可以将那些零碎数据暂存在缓存中，减小外系统的负荷，也提高了数据的传输速度

#### 磁道

当磁盘旋转时，磁头若保持在一个位置上，则每个磁头都会在磁盘表面划出一个圆形轨迹，这些圆形轨迹就叫做磁道。这些磁道用肉眼是根本看不到的，因为它们仅是盘面上以特殊方式磁化了的一些磁化区，磁盘上的信息便是沿着这样的轨道存放的。相邻磁道之间并不是紧挨着的，这是因为磁化单元相隔太近时磁性会相互产生影响，同时也为磁头的读写带来困难。一张1.44MB的3.5英寸软盘，一面有80个磁道，而硬盘上的磁道密度则远远大于此值，通常一面有成千上万个磁道。  
磁盘表面涂有做为纪录使用的磁性介质，其在显微镜下呈现出来的便是一个个磁颗粒。微小的磁颗粒极性可以被磁头快速的改变，并且在改变之后可以稳定的保持，系统通过磁通量以及磁阻的变化来分辨二进制中的0或者1。也正是因为所有的操作均是在微观情况下进行，所以如果硬盘在高速运行的同时受到外力的震荡，将会有可能因为磁头拍击磁盘表面而造成不可挽回的数据损失。  
磁盘上的每个磁道被等分为若干个弧段，这些弧段便是磁盘的扇区，每个扇区可以存放512个字节的信息，磁盘驱动器在向磁盘读取和写入数据时，要以扇区为单位。1.44MB3.5英寸的软盘，每个磁道分为18个扇区。

#### 柱面

硬盘通常由重叠的一组盘片构成，每个盘面都被划分为数目相等的磁道，并从外缘的“0”开始编号，具有相同编号的磁道形成一个圆柱，称之为磁盘的柱面。磁盘的柱面数与一个盘面上的磁道数是相等的。由于每个盘面都有自己的磁头，因此，盘面数等于总的磁头数。所谓硬盘的CHS，即Cylinder（柱面）、Head（磁头）、Sector（扇区），只要知道了硬盘的CHS的数目，即可确定硬盘的容量，硬盘的容量=柱面数磁头数扇区数512B。  

#### 磁盘保养

1. 硬盘在工作的时候，千万不要强行关掉电源。在硬盘工作的时候关掉电源，会导致硬盘的物理损坏，而且也会丢失数据。还有，在硬盘中有高速运转的部件，如果一旦强行关机的话高速运转的碟片就会突然停止，而在关机后又马上开机的话，就更有可能造成硬盘的损坏。所以在关机后不要马上再次打开电脑。至少在半分钟以后再打开。  
2. 在硬盘工作的时候要尽量避免它的震荡，因为，磁头与磁片的距离非常近，如果遭到剧烈的震荡会导致磁头敲打磁片，有可能磁头会划伤磁片，也可能会导致磁头的彻底损坏，使整个硬盘无法使用。
3. 硬盘是非常害怕灰尘的了。如果灰尘吸到了电路板上的话，就会导致硬盘工作不稳定，或者导致内部零件损坏。
4. 另外灰尘也可能吸收水分，腐蚀硬盘内部的电子线路，造成一些莫名其妙的问题，所以灰尘体积虽小，但对硬盘的危害不可低估。因此必须保持环境卫生，减少空气中的潮湿度和含尘量
5. 硬盘的功能工作状态与寿命和温度有很大的关系，温度过高或是过低都会导致晶体振荡器的时钟主频发生改变，会造成电路元件失灵，而如果温度过低时会导致，空气中水分凝结在元件上，导致短路的现象。
6. 尽量不要使硬盘靠近强磁场，如音箱、喇叭、电机、电台、手机等，以免硬盘所记录的数据因磁化而损坏。
7. 在对电脑进行维修过程中，很多人都是用手拿硬盘，但是在干燥的天气中，人的手上可能会积累上万伏的静电，手上的静电可能会击穿电路板上的芯片，导致硬盘出现故障。